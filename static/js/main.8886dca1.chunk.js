(this.webpackJsonpfood_ordering_app=this.webpackJsonpfood_ordering_app||[]).push([[0],[,,,,function(e,t,n){e.exports={form:"Checkout_form___tOug",formField:"Checkout_formField__D4ttq",actions:"Checkout_actions__kM0ok",submit:"Checkout_submit__1zYXg",invalid:"Checkout_invalid__16xsD"}},,function(e,t,n){e.exports={cartItems:"Cart_cartItems__1cACr",total:"Cart_total__dmLqA",actions:"Cart_actions__1L-8Q","button--alt":"Cart_button--alt__2OdsS",button:"Cart_button__2_KlA"}},,,,function(e,t,n){e.exports={cartItem:"CartItem_cartItem__26zBP",summary:"CartItem_summary__3MGEe",price:"CartItem_price__1I2OV",amount:"CartItem_amount__2ilxz",actions:"CartItem_actions__5mSiW"}},,function(e,t,n){e.exports={button:"HeaderCartButton_button__3KPWh",icon:"HeaderCartButton_icon__2b4C3",badge:"HeaderCartButton_badge__3XzEC",bump:"HeaderCartButton_bump__2W_ET"}},function(e,t,n){e.exports={meal:"MealItem_meal__2q0GZ",description:"MealItem_description__2FG25",price:"MealItem_price__b-uDx",chef:"MealItem_chef__22JQW"}},,,function(e,t,n){e.exports={modal:"Modal_modal__2zsDs","slide-down":"Modal_slide-down__TIyUA",backdrop:"Modal_backdrop__3YwFo"}},function(e,t,n){e.exports={availableFoods:"AvailableFoods_availableFoods__2UHS3","meals-appear":"AvailableFoods_meals-appear__2syqS",foodsLoading:"AvailableFoods_foodsLoading__2hfiQ",error:"AvailableFoods_error__D6U6R"}},,,function(e,t,n){e.exports={header:"Header_header__26Szw",mainImage:"Header_mainImage__2Sty9"}},function(e,t,n){},,function(e,t,n){e.exports={button:"Button_button__3jrFZ"}},function(e,t,n){e.exports={card:"Card_card__zZoLg"}},function(e,t,n){e.exports={labeledInput:"InputWithLabel_labeledInput__2ZhMX"}},function(e,t,n){e.exports={mealForm:"MealForm_mealForm__3uCDm"}},function(e,t,n){e.exports={mealSummary:"MealsSummary_mealSummary__SyGd0"}},,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),o=n.n(r),i=(n(33),n(3)),s=n(21),l=n.n(s),u=n(9),d=n.n(u),m=n(15),j=n(5),b=c.a.createContext({items:[],totalAmount:0,addItem:function(){},removeItem:function(){},clearCart:function(){}}),O=n(2),f=n(23),h=n.n(f),x=n(0),p=function(e){return Object(x.jsx)("button",Object(O.a)(Object(O.a)({className:h.a.button},e),{},{onClick:e.onClick,children:e.children}))},_=n(16),v=n.n(_),C=function(e){return Object(x.jsx)("div",{className:v.a.backdrop,onClick:e.onClick})},g=function(e){return Object(x.jsx)("div",{className:v.a.modal,children:Object(x.jsx)("div",{className:v.a.content,children:e.children})})},I=document.getElementById("overlays"),y=function(e){return Object(x.jsxs)(x.Fragment,{children:[o.a.createPortal(Object(x.jsx)(C,{onClick:e.onClose}),I),o.a.createPortal(Object(x.jsx)(g,{children:e.children}),I)]})},N=n(6),A=n.n(N),S=n(10),F=n.n(S),w=function(e){var t="".concat(e.price.toFixed(2)," /-"),n=Object(a.useContext)(b);return Object(x.jsxs)("li",{className:F.a.cartItem,children:[Object(x.jsx)("h3",{children:e.name}),Object(x.jsxs)("div",{className:F.a.summary,children:[Object(x.jsx)("span",{className:F.a.price,children:t}),Object(x.jsxs)("span",{className:F.a.amount,children:["x ",e.amount]})]}),Object(x.jsxs)("div",{className:F.a.actions,children:[Object(x.jsxs)("button",{onClick:n.removeItem.bind(null,e.id),children:[" ","-"," "]}),Object(x.jsxs)("button",{onClick:n.addItem.bind(null,{id:e.id,name:e.name,description:e.description,price:+e.price,amount:1}),children:[" ","+"," "]})]})]})},k=n(4),M=n.n(k),E=function(e){return""===e.trim()},T=function(e,t){return e.trim().length===t},D=function(e){var t=Object(a.useState)({name:!0,street:!0,city:!0,postal:!0,mobileNum:!0}),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(a.useRef)(),s=Object(a.useRef)(),l=Object(a.useRef)(),u=Object(a.useRef)(),d=Object(a.useRef)();return Object(x.jsxs)("form",{className:M.a.form,onSubmit:function(t){t.preventDefault();var n=o.current.value,a=s.current.value,c=l.current.value,i=u.current.value,m=d.current.value,j=!E(n),b=!E(a),O=!E(c),f=T(i,6),h=T(m,10);r({name:j,street:b,city:O,postal:f,mobileNum:h}),j&&b&&O&&f&&h&&e.onConfirm({name:n,street:a,city:c,postal:i,mobileNum:m})},children:[Object(x.jsxs)("div",{className:"".concat(M.a.formField," ").concat(c.name?"":M.a.invalid),children:[Object(x.jsx)("label",{htmlFor:"name",children:"Your Name"}),Object(x.jsx)("input",{type:"text",id:"name",ref:o}),!c.name&&Object(x.jsx)("p",{children:"Please enter a valid name!"})]}),Object(x.jsxs)("div",{className:"".concat(M.a.formField," ").concat(c.street?"":M.a.invalid),children:[Object(x.jsx)("label",{htmlFor:"street",children:"Street"}),Object(x.jsx)("input",{type:"text",id:"street",ref:s}),!c.street&&Object(x.jsx)("p",{children:"Please enter a valid street!"})]}),Object(x.jsxs)("div",{className:"".concat(M.a.formField," ").concat(c.city?"":M.a.invalid),children:[Object(x.jsx)("label",{htmlFor:"city",children:"City"}),Object(x.jsx)("input",{type:"text",id:"city",ref:l}),!c.city&&Object(x.jsx)("p",{children:"Please enter a valid city!"})]}),Object(x.jsxs)("div",{className:"".concat(M.a.formField," ").concat(c.postal?"":M.a.invalid),children:[Object(x.jsx)("label",{htmlFor:"postal",children:"Postal"}),Object(x.jsx)("input",{type:"text",id:"postal",ref:u}),!c.postal&&Object(x.jsx)("p",{children:"Please enter a valid postal code(6 characters long) !"})]}),Object(x.jsxs)("div",{className:"".concat(M.a.formField," ").concat(c.mobileNum?"":M.a.invalid),children:[Object(x.jsx)("label",{htmlFor:"mobileNum",children:"Mobile Number"}),Object(x.jsx)("input",{type:"text",id:"mobileNum",ref:d}),!c.mobileNum&&Object(x.jsx)("p",{children:"Please enter a valid mobile num(10 digits)!"})]}),Object(x.jsxs)("div",{className:M.a.actions,children:[Object(x.jsx)("button",{type:"button",onClick:e.onCancel,children:"Cancel"}),Object(x.jsx)("button",{type:"submit",className:M.a.submit,children:"Confirm"})]})]})},R=function(e){var t=Object(j.c)((function(e){return e.cartItems})),n=Object(j.c)((function(e){return e.totalAmount})),c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],s=r[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),O=u[0],f=u[1],h=Object(a.useState)(!1),_=Object(i.a)(h,2),v=_[0],C=_[1],g=Object(a.useContext)(b),I=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,fetch("https://foodorder-e71c7-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedItems:g.items})});case 3:if(e.sent.ok){e.next=6;break}throw new Error("something went wrong");case 6:f(!1),C(!0),g.clearCart();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=t.map((function(e){return Object(x.jsxs)(w,{id:e.id,price:e.price,name:e.name,amount:e.amount,description:e.description,children:[" ",e.name," "]},e.id)})),S=t.length>0,F=Object(x.jsxs)("div",{className:A.a.actions,children:[Object(x.jsx)(p,{className:A.a["button--alt"],onClick:e.onCloseCart,children:"Close "})," ",S&&Object(x.jsx)(p,{className:A.a.button,onClick:function(e){s(!0)},children:"Order "})," "]}),k=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("ul",{className:A.a.cartItems,children:[" ",N," "]}),Object(x.jsxs)("div",{className:A.a.total,children:[Object(x.jsx)("span",{children:" Total Amount "}),Object(x.jsxs)("span",{children:[" ",n," "]})]})," ",o&&Object(x.jsx)(D,{onConfirm:I,onCancel:e.onCloseCart})," ",!o&&F]}),M=Object(x.jsx)("p",{children:" Sending order data... "}),E=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:" Successfully sent the order! "}),Object(x.jsx)("div",{className:A.a.actions,children:Object(x.jsx)("button",{className:A.a.button,onClick:e.onCloseCart,children:"Close "})})]});return Object(x.jsxs)(y,{onClose:e.onCloseCart,children:[" ",!O&&!v&&k," ",O&&M," ",!O&&v&&E," "]})},P=n.p+"static/media/foodImage.29922545.jpg",L=n(20),H=n.n(L),B=n(12),z=n.n(B),V=function(){return Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},q=function(e){var t=Object(j.c)((function(e){return e.cartItems})),n=Object(a.useState)(!1),c=Object(i.a)(n,2),r=c[0],o=c[1],s=t.reduce((function(e,t){return e+t.amount}),0);Object(a.useEffect)((function(){var e;if(console.log("useEffect"),0!==s)return r||(console.log("isBtnHighlighted",r),o(!0),e=setTimeout((function(){o(!1)}),300)),function(){clearTimeout(e)}}),[s]);var l="".concat(z.a.button," ").concat(r?z.a.bump:"");return Object(x.jsxs)("button",{className:l,onClick:e.onShowCart,children:[Object(x.jsx)("span",{className:z.a.icon,children:Object(x.jsx)(V,{})}),Object(x.jsx)("span",{children:"Your Cart"}),Object(x.jsx)("span",{className:z.a.badge,children:s})]})},W=function(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("header",{className:H.a.header,children:[Object(x.jsx)("h1",{children:"KVS Foods "}),Object(x.jsx)(q,{onShowCart:e.onShowCart})]}),Object(x.jsx)("div",{className:H.a.mainImage,children:Object(x.jsx)("img",{src:P,alt:"Delicious good"})})]})},Y=n(24),G=n.n(Y),J=function(e){return Object(x.jsx)("div",{className:G.a.card,children:e.children})},K=n(17),Z=n.n(K),Q=n(25),U=n.n(Q),X=c.a.forwardRef((function(e,t){return Object(x.jsxs)("div",{className:U.a.labeledInput,children:[Object(x.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(x.jsx)("input",Object(O.a)({ref:t},e.input))]})})),$=n(26),ee=n.n($),te=function(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(a.useRef)();return Object(x.jsxs)("form",{className:ee.a.mealForm,onSubmit:function(t){t.preventDefault();var n=o.current.value,a=+n;0===n.trim().length||a<1||a>5?r(!1):(r(!0),e.onAddToCart(a))},children:[Object(x.jsx)(X,{ref:o,label:"Amount",input:{type:"number",id:e.id+"_number",min:"1",max:"5",step:"1",defaultValue:"1",value:e.value}}),Object(x.jsx)(p,{type:"submit",children:"+ Add"}),!c&&Object(x.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},ne=n(13),ae=n.n(ne),ce=function(e){var t=Object(a.useContext)(b);return Object(x.jsxs)("li",{className:ae.a.meal,children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:e.name}),Object(x.jsx)("div",{className:ae.a.description,children:e.description}),Object(x.jsxs)("div",{className:ae.a.price,children:[e.price," /- "]}),Object(x.jsxs)("div",{className:ae.a.chef,children:["Chef: ",e.chef," "]})]}),Object(x.jsx)("div",{children:Object(x.jsx)(te,{id:e.id,onAddToCart:function(n){t.addItem({id:e.id,name:e.name,amount:n,price:e.price})}})})]})},re=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),o=Object(i.a)(r,2),s=o[0],l=o[1],u=Object(a.useState)(!1),j=Object(i.a)(u,2),b=j[0],f=j[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://foodorder-e71c7-default-rtdb.asia-southeast1.firebasedatabase.app/meals.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong");case 5:return e.next=7,t.json();case 7:for(r in n=e.sent,a=[],n)a.push(Object(O.a)({id:r},n[r]));c(a),l(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch((function(e){f(!0),l(!1)}))}),[]),s)return Object(x.jsxs)("section",{className:Z.a.foodsLoading,children:[Object(x.jsx)("p",{children:" Loading... "})," "]});if(b)return Object(x.jsxs)("section",{className:Z.a.error,children:[Object(x.jsx)("p",{children:" Something went wrong, Please try again later "})," "]});var h=n.map((function(e){return Object(x.jsx)(ce,{id:e.id,name:e.name,description:e.description,price:e.price,chef:e.chef},e.id)}));return Object(x.jsxs)("section",{className:Z.a.availableFoods,children:[Object(x.jsxs)(J,{children:[Object(x.jsxs)("ul",{children:[" ",h," "]})," "]})," "]})},oe=n(27),ie=n.n(oe),se=function(){console.log("MealsSummary");var e=Object(a.useState)("abc"),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){console.log("MealsSummary:effect:before:1"),c((function(e){return console.log("prevState:1",e),"def"})),console.log("MealsSummary:effect:before:2"),c((function(e){return console.log("prevState:2",e),"ghi"}))}),[n]),Object(x.jsxs)("section",{className:ie.a.mealSummary,children:[Object(x.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(x.jsx)("p",{children:"Choose your favorite Food"}),Object(x.jsx)("p",{children:"All our foods are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})},le=function(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(se,{}),Object(x.jsx)(re,{})]})},ue=n(8),de={items:[],totalAmount:0},me=function(e,t){if("ADD_ITEM"===t.type){var n,a,c=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),o=e.items[r];return o?(n=Object(O.a)(Object(O.a)({},o),{},{amount:o.amount+t.item.amount}),(a=Object(ue.a)(e.items))[r]=n):(n=Object(O.a)({},t.item),a=e.items.concat(t.item)),Object(O.a)(Object(O.a)({},e),{},{items:a,totalAmount:c})}if("REMOVE_ITEM"===t.type){var i,s=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[s],u=e.totalAmount-l.price;if(1===l.amount)i=e.items.filter((function(e){return e.id!==t.id}));else{var d=Object(O.a)(Object(O.a)({},l),{},{amount:l.amount-1});(i=Object(ue.a)(e.items))[s]=d}return{items:i,totalAmount:u}}return"CLEAR_CART"===t.type?{items:[],totalAmount:0}:(console.log("ADD_ITEM::::last",e),Object(O.a)({},e))},je=function(e){var t=Object(a.useReducer)(me,de),n=Object(i.a)(t,1)[0],c=Object(j.b)(),r={items:Object(ue.a)(n.items),totalAmount:n.totalAmount,addItem:function(e){console.log("item",e),c({type:"ADD_ITEM",item:e})},removeItem:function(e){console.log("id",e),c({type:"REMOVE_ITEM",id:e})},clearCart:function(){console.log("clear cart"),c({type:"CLEAR_CART"})}};return Object(x.jsxs)(b.Provider,{value:r,children:[" ",e.children," "]})};var be=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(x.jsx)("div",{className:l.a.KVS_Food,children:Object(x.jsxs)(je,{children:[n&&Object(x.jsx)(R,{onCloseCart:function(){c(!1)}}),Object(x.jsx)(W,{onShowCart:function(){c(!0)}}),Object(x.jsx)(le,{})]})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},fe=n(28),he={numberOfCartItems:0,cartItems:[],totalAmount:0,availableItems:[]},xe=Object(fe.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM":var n,a,c=e.totalAmount+t.item.price*t.item.amount,r=e.cartItems.findIndex((function(e){return e.id===t.item.id})),o=e.cartItems[r];return o?(n=Object(O.a)(Object(O.a)({},o),{},{amount:o.amount+t.item.amount}),(a=Object(ue.a)(e.cartItems))[r]=n):(n=Object(O.a)({},t.item),a=e.cartItems.concat(t.item)),console.log("reducer:",Object(O.a)(Object(O.a)({},e),{},{cartItems:a,totalAmount:c})),Object(O.a)(Object(O.a)({},e),{},{cartItems:a,totalAmount:c});case"REMOVE_ITEM":var i,s=e.cartItems.findIndex((function(e){return e.id===t.id})),l=e.cartItems[s],u=e.totalAmount-l.price;if(1===l.amount)i=e.cartItems.filter((function(e){return e.id!==t.id}));else{var d=Object(O.a)(Object(O.a)({},l),{},{amount:l.amount-1});(i=Object(ue.a)(e.cartItems))[s]=d}return Object(O.a)(Object(O.a)({},e),{},{cartItems:i,totalAmount:u});case"CLEAR_CART":return Object(O.a)(Object(O.a)({},e),{},{cartItems:[],totalAmount:0});case"AVAILABLE_ITEMS":return Object(O.a)(Object(O.a)({},e),{},{availableItems:t.payload});default:return e}})),pe=xe;o.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(j.a,{store:pe,children:Object(x.jsx)(be,{})})}),document.getElementById("root")),Oe()}],[[42,1,2]]]);
//# sourceMappingURL=main.8886dca1.chunk.js.map